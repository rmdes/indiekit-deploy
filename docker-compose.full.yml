# Indiekit Docker Compose â€” Full plugin override
#
# Usage: docker compose -f docker-compose.yml -f docker-compose.full.yml up -d
#
# Overrides the indiekit service to install ALL @rmdes plugins,
# and the caddy service to route their API endpoints.

services:
  indiekit:
    # Pre-built full image includes all @rmdes/* plugins
    # GHCR alternative: ghcr.io/rmdes/indiekit-deploy-server-full:latest
    image: rmdes/indiekit-deploy-server-full:latest
    build:
      context: .
      dockerfile: docker/indiekit/Dockerfile
      args:
        PROFILE: full

  caddy:
    volumes:
      - ./docker/caddy/Caddyfile.full:/etc/caddy/Caddyfile:ro
      - site:/data/site:ro
      - uploads:/data/uploads:ro
      - content:/data/content:ro
      - caddy_data:/data/caddy
      - caddy_config:/config
